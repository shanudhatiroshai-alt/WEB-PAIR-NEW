<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WhatsApp Pair Code Generator</title>
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }

    /* ========================================
       ANIMATED BACKGROUNDS - Multiple Styles
       ======================================== */

    /* Animated Gradient Wave Background */
    .bg-animated-gradient {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(-45deg, #667eea, #764ba2, #f093fb, #4facfe);
      background-size: 400% 400%;
      animation: gradientWave 15s ease infinite;
      z-index: 1;
    }

    @keyframes gradientWave {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Floating Geometric Shapes */
    .geometric-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      z-index: 1;
      overflow: hidden;
    }

    .shape {
      position: absolute;
      opacity: 0.1;
      animation: float 20s infinite ease-in-out;
    }

    .shape-1 {
      width: 300px;
      height: 300px;
      background: linear-gradient(45deg, #fff, transparent);
      border-radius: 50%;
      top: -100px;
      left: -100px;
      animation-delay: 0s;
    }

    .shape-2 {
      width: 200px;
      height: 200px;
      background: linear-gradient(135deg, #fff, transparent);
      border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
      top: 50%;
      right: -50px;
      animation-delay: 3s;
    }

    .shape-3 {
      width: 250px;
      height: 250px;
      background: linear-gradient(225deg, #fff, transparent);
      border-radius: 63% 37% 54% 46% / 55% 48% 52% 45%;
      bottom: -80px;
      left: 30%;
      animation-delay: 6s;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      25% { transform: translateY(-30px) rotate(5deg); }
      50% { transform: translateY(-60px) rotate(-5deg); }
      75% { transform: translateY(-30px) rotate(3deg); }
    }

    /* Animated Particles/Bubbles */
    .particles-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
      overflow: hidden;
    }

    .particle {
      position: absolute;
      border-radius: 50%;
      animation: rise 15s infinite ease-in;
      opacity: 0;
    }

    @keyframes rise {
      0% {
        bottom: -100px;
        opacity: 0;
        transform: translateX(0) scale(1);
      }
      10% {
        opacity: 0.8;
      }
      90% {
        opacity: 0.8;
      }
      100% {
        bottom: 110vh;
        opacity: 0;
        transform: translateX(100px) scale(0.5);
      }
    }

    /* Animated Mesh Gradient */
    .mesh-gradient {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(at 0% 0%, #667eea 0px, transparent 50%),
        radial-gradient(at 100% 0%, #764ba2 0px, transparent 50%),
        radial-gradient(at 100% 100%, #f093fb 0px, transparent 50%),
        radial-gradient(at 0% 100%, #4facfe 0px, transparent 50%);
      animation: meshMove 20s ease infinite;
      z-index: 1;
    }

    @keyframes meshMove {
      0%, 100% { filter: hue-rotate(0deg); }
      50% { filter: hue-rotate(45deg); }
    }

    /* Aurora Background */
    .aurora-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      z-index: 1;
    }

    .aurora {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .aurora-light-1 {
      position: absolute;
      width: 200%;
      height: 200%;
      background: radial-gradient(ellipse at center, rgba(102, 126, 234, 0.4) 0%, transparent 70%);
      animation: aurora1 20s ease-in-out infinite;
      top: -50%;
      left: -50%;
    }

    .aurora-light-2 {
      position: absolute;
      width: 200%;
      height: 200%;
      background: radial-gradient(ellipse at center, rgba(240, 147, 251, 0.3) 0%, transparent 70%);
      animation: aurora2 25s ease-in-out infinite;
      top: -50%;
      left: -50%;
    }

    .aurora-light-3 {
      position: absolute;
      width: 200%;
      height: 200%;
      background: radial-gradient(ellipse at center, rgba(79, 172, 254, 0.3) 0%, transparent 70%);
      animation: aurora3 30s ease-in-out infinite;
      top: -50%;
      left: -50%;
    }

    @keyframes aurora1 {
      0%, 100% { transform: translate(0%, 0%) rotate(0deg); }
      33% { transform: translate(30%, 20%) rotate(120deg); }
      66% { transform: translate(-20%, 30%) rotate(240deg); }
    }

    @keyframes aurora2 {
      0%, 100% { transform: translate(0%, 0%) rotate(0deg); }
      33% { transform: translate(-30%, 30%) rotate(-120deg); }
      66% { transform: translate(20%, -20%) rotate(-240deg); }
    }

    @keyframes aurora3 {
      0%, 100% { transform: translate(0%, 0%) rotate(0deg); }
      33% { transform: translate(20%, -30%) rotate(90deg); }
      66% { transform: translate(-30%, 20%) rotate(180deg); }
    }

    /* Stars Background */
    .stars-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e);
      z-index: 1;
    }

    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: twinkle 3s infinite;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.3; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.2); }
    }

    /* ========================================
       MAIN CONTENT STYLES
       ======================================== */

    .container-main {
      position: relative;
      z-index: 10;
      max-width: 500px;
      width: 90%;
      animation: slideIn 0.8s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .glass-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      padding: 40px;
      animation: cardAppear 0.8s ease-out 0.2s both;
    }

    @keyframes cardAppear {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .logo-container {
      text-align: center;
      margin-bottom: 30px;
      animation: bounce 2s ease-in-out infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .logo-icon {
      font-size: 64px;
      color: #25D366;
      filter: drop-shadow(0 4px 8px rgba(37, 211, 102, 0.3));
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .card-title {
      color: white;
      font-weight: 600;
      font-size: 28px;
      text-align: center;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .card-subtitle {
      color: rgba(255, 255, 255, 0.9);
      text-align: center;
      margin-bottom: 30px;
      font-size: 14px;
    }

    .form-control-custom {
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 15px;
      padding: 15px 20px;
      color: white;
      font-size: 16px;
      transition: all 0.3s ease;
    }

    .form-control-custom:focus {
      background: rgba(255, 255, 255, 0.25);
      border-color: #25D366;
      box-shadow: 0 0 20px rgba(37, 211, 102, 0.3);
      outline: none;
      color: white;
    }

    .form-control-custom::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }

    .btn-submit {
      background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
      border: none;
      border-radius: 15px;
      padding: 15px;
      width: 100%;
      color: white;
      font-weight: 600;
      font-size: 16px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .btn-submit:before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.2);
      transition: left 0.5s ease;
    }

    .btn-submit:hover:before {
      left: 100%;
    }

    .btn-submit:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(37, 211, 102, 0.4);
    }

    .spinner-custom {
      display: inline-block;
      width: 40px;
      height: 40px;
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top-color: #25D366;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .code-display {
      background: rgba(255, 255, 255, 0.15);
      border-radius: 15px;
      padding: 20px;
      margin-top: 15px;
      animation: fadeIn 0.5s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .code-text {
      color: white;
      font-size: 32px;
      font-weight: 700;
      letter-spacing: 3px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Courier New', monospace;
    }

    .code-text:hover {
      transform: scale(1.05);
      color: #25D366;
    }

    .theme-switcher {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 100;
      display: flex;
      gap: 10px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      padding: 10px;
      border-radius: 15px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .theme-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid white;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .theme-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
    }

    .theme-btn.active {
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
      border-width: 3px;
    }

    .theme-btn.active::after {
      content: 'âœ“';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 20px;
      font-weight: bold;
    }

    /* Theme button colors */
    .theme-purple { background: linear-gradient(135deg, #667eea, #764ba2); }
    .theme-ocean { background: linear-gradient(135deg, #4facfe, #00f2fe); }
    .theme-sunset { background: linear-gradient(135deg, #fa709a, #fee140); }
    .theme-forest { background: linear-gradient(135deg, #11998e, #38ef7d); }
    .theme-aurora { background: linear-gradient(135deg, #000, #667eea); }
    .theme-fire { background: linear-gradient(135deg, #ff6b6b, #feca57); }

    @media (max-width: 576px) {
      .glass-card { padding: 30px 20px; }
      .card-title { font-size: 24px; }
      .code-text { font-size: 24px; }
      .theme-switcher {
        top: 10px;
        right: 10px;
        flex-wrap: wrap;
        max-width: 120px;
      }
      .theme-btn { width: 35px; height: 35px; }
    }
  </style>
</head>
<body>
  <!-- Background Container (will be changed by theme) -->
  <div id="backgroundContainer"></div>

  <!-- Theme Switcher -->
  <div class="theme-switcher">
    <div class="theme-btn theme-purple active" onclick="changeTheme('purple')" title="Purple Wave"></div>
    <div class="theme-btn theme-ocean" onclick="changeTheme('ocean')" title="Ocean Blue"></div>
    <div class="theme-btn theme-sunset" onclick="changeTheme('sunset')" title="Sunset"></div>
    <div class="theme-btn theme-forest" onclick="changeTheme('forest')" title="Forest"></div>
    <div class="theme-btn theme-aurora" onclick="changeTheme('aurora')" title="Aurora"></div>
    <div class="theme-btn theme-fire" onclick="changeTheme('fire')" title="Fire"></div>
  </div>

  <div class="container-main">
    <div class="glass-card">
      <div class="logo-container">
        <i class="fab fa-whatsapp logo-icon"></i>
      </div>
      
      <h1 class="card-title">WhatsApp Pairing</h1>
      <p class="card-subtitle">
        <i class="fas fa-shield-alt me-2"></i>Link your device securely
      </p>

      <form id="pairForm">
        <div class="mb-3">
          <input 
            type="tel" 
            class="form-control form-control-custom" 
            id="phoneNumber" 
            placeholder="Enter phone number with country code"
            autocomplete="tel"
          >
          <small class="text-white-50 d-block mt-2">
            <i class="fas fa-info-circle me-1"></i>Example: +1234567890
          </small>
        </div>

        <button type="submit" class="btn btn-submit">
          <i class="fas fa-paper-plane me-2"></i>Generate Pairing Code
        </button>
      </form>

      <div class="text-center mt-3" id="loadingSpinner" style="display: none;">
        <div class="spinner-custom"></div>
        <p class="text-white mt-3">Generating your code...</p>
      </div>

      <div id="resultContainer"></div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Axios -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.0/axios.min.js"></script>
  
  <script>
    // Theme configurations
    const themes = {
      purple: {
        gradient: 'linear-gradient(-45deg, #667eea, #764ba2, #f093fb, #4facfe)',
        particles: ['#667eea', '#764ba2', '#f093fb', '#4facfe']
      },
      ocean: {
        gradient: 'linear-gradient(-45deg, #4facfe, #00f2fe, #43e97b, #38f9d7)',
        particles: ['#4facfe', '#00f2fe', '#43e97b', '#38f9d7']
      },
      sunset: {
        gradient: 'linear-gradient(-45deg, #fa709a, #fee140, #30cfd0, #ff9a9e)',
        particles: ['#fa709a', '#fee140', '#30cfd0', '#ff9a9e']
      },
      forest: {
        gradient: 'linear-gradient(-45deg, #11998e, #38ef7d, #93f9b9, #1fa2ff)',
        particles: ['#11998e', '#38ef7d', '#93f9b9', '#1fa2ff']
      },
      aurora: {
        type: 'aurora',
        base: '#000'
      },
      fire: {
        gradient: 'linear-gradient(-45deg, #ff6b6b, #feca57, #ee5a6f, #f7b731)',
        particles: ['#ff6b6b', '#feca57', '#ee5a6f', '#f7b731']
      }
    };

    let currentTheme = 'purple';

    // Initialize background
    function initBackground(theme = 'purple') {
      const container = document.getElementById('backgroundContainer');
      container.innerHTML = '';

      if (theme === 'aurora') {
        container.className = 'aurora-bg';
        container.innerHTML = `
          <div class="aurora">
            <div class="aurora-light-1"></div>
            <div class="aurora-light-2"></div>
            <div class="aurora-light-3"></div>
          </div>
        `;
        createStars(container);
      } else {
        container.className = 'bg-animated-gradient';
        container.style.background = themes[theme].gradient;
        container.style.backgroundSize = '400% 400%';
        container.style.animation = 'gradientWave 15s ease infinite';
        
        createParticles(container, themes[theme].particles);
      }
    }

    // Create animated particles
    function createParticles(container, colors) {
      const particlesDiv = document.createElement('div');
      particlesDiv.className = 'particles-container';
      
      for (let i = 0; i < 15; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        
        const size = Math.random() * 60 + 20;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.background = colors[Math.floor(Math.random() * colors.length)];
        particle.style.animationDelay = `${Math.random() * 15}s`;
        particle.style.animationDuration = `${Math.random() * 10 + 15}s`;
        
        particlesDiv.appendChild(particle);
      }
      
      container.appendChild(particlesDiv);
    }

    // Create stars for aurora theme
    function createStars(container) {
      for (let i = 0; i < 100; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        
        const size = Math.random() * 3 + 1;
        star.style.width = `${size}px`;
        star.style.height = `${size}px`;
        star.style.left = `${Math.random() * 100}%`;
        star.style.top = `${Math.random() * 100}%`;
        star.style.animationDelay = `${Math.random() * 3}s`;
        
        container.appendChild(star);
      }
    }

    // Change theme
    function changeTheme(theme) {
      currentTheme = theme;
      initBackground(theme);
      
      // Update active button
      document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      // Store preference
      localStorage.setItem('selectedTheme', theme);
    }

    // Load saved theme
    const savedTheme = localStorage.getItem('selectedTheme') || 'purple';
    initBackground(savedTheme);

    // Update active button on load
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.querySelector(`.theme-${savedTheme}`).classList.add('active');
    });

    // Form handling
    const form = document.getElementById('pairForm');
    const phoneInput = document.getElementById('phoneNumber');
    const loadingSpinner = document.getElementById('loadingSpinner');
    const resultContainer = document.getElementById('resultContainer');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const phoneNumber = phoneInput.value.trim();
      
      if (!phoneNumber) {
        showError('Please enter your phone number');
        return;
      }

      const cleanNumber = phoneNumber.replace(/[^0-9]/g, '');
      
      if (cleanNumber.length < 11) {
        showError('Invalid number format. Please include country code.');
        return;
      }

      loadingSpinner.style.display = 'block';
      resultContainer.innerHTML = '';
      
      try {
        const { data } = await axios.get(`/code?number=${cleanNumber}`);
        const code = data.code || 'Service Unavailable';
        
        if (code === 'Service Unavailable') {
          showError('Service is temporarily unavailable. Please try again later.');
        } else {
          showSuccess(code);
        }
      } catch (error) {
        showError('Failed to generate code. Please try again.');
      } finally {
        loadingSpinner.style.display = 'none';
      }
    });

    function showSuccess(code) {
      resultContainer.innerHTML = `
        <div class="code-display">
          <i class="fas fa-check-circle text-success" style="font-size: 48px; margin-bottom: 10px;"></i>
          <h3 class="text-white mb-3">Your Pairing Code</h3>
          <div class="code-text" id="codeText" onclick="copyCode()">${code}</div>
          <p class="text-white-50 mt-2" style="font-size: 12px;">
            <i class="fas fa-copy me-1"></i>Click to copy
          </p>
        </div>
      `;
    }

    function showError(message) {
      resultContainer.innerHTML = `
        <div class="alert alert-danger mt-3" style="background: rgba(255, 59, 48, 0.2); border: 1px solid rgba(255, 59, 48, 0.5); color: white; border-radius: 10px;">
          <i class="fas fa-exclamation-triangle me-2"></i>${message}
        </div>
      `;
    }

    async function copyCode() {
      const codeText = document.getElementById('codeText');
      const originalText = codeText.textContent;
      
      try {
        await navigator.clipboard.writeText(originalText);
        codeText.innerHTML = '<i class="fas fa-check me-2"></i>Copied!';
        codeText.style.color = '#25D366';
        
        setTimeout(() => {
          codeText.textContent = originalText;
          codeText.style.color = 'white';
        }, 2000);
      } catch (err) {
        console.error('Failed to copy:', err);
      }
    }

    phoneInput.addEventListener('input', (e) => {
      let value = e.target.value.replace(/[^0-9+]/g, '');
      e.target.value = value;
    });
  </script>
</body>
</html>